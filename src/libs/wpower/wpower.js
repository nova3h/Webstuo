var __webpack_modules__={941:(e,t,n)=>{n.d(t,{Z:()=>r});const r=class{Name="";Html="";Css="";Data={};Wrapper=null;Key="";constructor(){this.Key=Math.random().toString().replace(".",""),this.$=this.$.bind(this),this.$$=this.$$.bind(this),this.remove_self=this.remove_self.bind(this)}_____UTILS_____(){}$(e){return e$(this.Wrapper,e)}$$(e){return e$$(this.Wrapper,e)}remove_self(){cvm.remove_com(this.Name)}_____CORE_____(){}init(e){if(null!=e){for(let t of methods(e))e[t]=e[t].bind(e);this._init_done=!0}}render(){}rerender(e){null!=e&&(this.Data={...this.Data,...e}),null!=this.pre_rerender&&this.pre_rerender(),cvm.render_com(null,this.Data,null,this)}async load_data(){}}},583:(e,t,n)=>{n.d(t,{Z:()=>_});var r=n(21),a=n(733),i=(n(720),n(417),n(742));class l{static Screens={};static Coms={};static Menus={};static Key2Controller={};_____UTILS_____(){}static set_title(e){document.title=e}static com_is_loaded(e){return null!=d$(`div[com-name="${e}"]`)}static get_screen(e){return s.Screens[e].Instance}static get_last_com(e){return s.Coms[e].Instance}static remove_com(e){var t=d$$(`div[com-name="${e}"]`);if(null!=t&&0!=t.length)for(let e of t)e.remove()}static parse_h(e){if(null==e)return logw("cvm.js/parse_h: Some HTML is null, empty HTML file somewhere?"),"";var t=e.split("\n");for(let e=0;e<t.length;e++)t[e].indexOf("$1{for_(")>=0&&(t[e]=t[e].trimRight()+"\\`"),t[e].indexOf("${for_(")>=0&&(t[e]=t[e].trimRight()+"`"),t[e].indexOf("$1{for_key_(")>=0&&(t[e]=t[e].trimRight()+"\\`"),t[e].indexOf("${for_key_(")>=0&&(t[e]=t[e].trimRight()+"`"),t[e]=t[e].replaceAll("#$1","\\`)}"),t[e]=t[e].replaceAll("#$","`)}"),t[e]=t[e].replaceAll("$2{","\\\\\\${"),t[e]=t[e].replaceAll("$1{","\\${");return t.join("\n")}_____CORE_____(){}static init(){i.Z.init()}static init_screen(e,t,n,r){l.Screens[e]={Class:t,Html:n.toString(),Css:r.toString(),Html_Parsed:s.parse_h(n),Instance:{}}}static init_com(e,t,n,r){l.Coms[e]={Class:t,Html:n.toString(),Css:r.toString(),Html_Parsed:s.parse_h(n),Instance:{}}}static render_screen(e,t){var n=l.Screens[e];if(null!=n?.Class){var a=new n.Class(t);a.Name=e,a.Data=t,a.Data._Con=a,a.init(),1!=a._init_done&&loge(`Screen ${e}: Must inherit 'init' and call super.init(this) inside init method`);var i=d$("body");if(i.innerHTML=r.Z.parse_dom(r.Z.eval_ctx("`"+n.Html_Parsed+"`",a.Data),a.Data),i.attr("screen-name",e),null==d$(`style[screen-name="${e}"]`)){var _=d$("head"),o=new_ele("style");o.textContent=n.Css,o.attr("screen-name",e),_.appendChild(o)}for(let e in s.Key2Controller){let t=d$(`div[key="${e}"]`),n=s.Key2Controller[e];null!=t?(t.Controller=n,n.Wrapper=t):loge("cvm.js/render_screen: No wrapper in DOM for:",n),delete s.Key2Controller[e]}return i.Controller=a,a.Wrapper=i,s.Screens[e].Instance=a,a.render(),a.load_data(),a}loge("cvm.js: Screen has not been init'ed:",e)}static render_com(e,t,n,a=!1,i=!1){var _,o=null==e;o&&((_=a).Wrapper=d$(`div[key="${_.Key}"]`),e=_.Name,n=_.Wrapper.parentElement);var c=l.Coms[e];if(null!=c?.Class){o?(_.Data=t,_.Data._Key=_.Key):((_=new c.Class(t)).Name=e,_.Data=t,_.Data._Key=_.Key,_.Data._Con=_,_.init(),"string"==typeof n&&"get-all"!=n&&(n=d$(n)),1!=_._init_done&&loge(`Component ${e}: Must inherit 'init' and call super.init(this) inside init method`));var d=new_ele("div");if(d.innerHTML=r.Z.parse_dom(r.Z.eval_ctx("`"+c.Html_Parsed+"`",_.Data),_.Data),d.attr("com-name",e),d.attr("key",_.Key),!0===i?d.attr("style","display:inline-block;"):d.attr("style","display:block; flex:1;"),d.classList.add("com-wrapper"),o)_.Wrapper.replaceWith(d);else if(null!=n&&"get-all"!=n){a||(n.innerHTML=""),n.appendChild(d);for(let e in s.Key2Controller){let t=d$(`div[key="${e}"]`),n=s.Key2Controller[e];null!=t?(t.Controller=n,n.Wrapper=t):loge("cvm.js/render_com: No wrapper in DOM for:",n),delete s.Key2Controller[e]}}else s.Key2Controller[_.Key]=_;if(!o&&null==d$(`style[com-name="${e}"]`)){var u=d$("head"),p=new_ele("style");p.textContent=c.Css,p.attr("com-name",e),u.appendChild(p)}return _.Wrapper=d,_.Wrapper.Controller=_,s.Coms[e].Instance=_,_.render(d),_.load_data(d),null==n?d.outerHTML:"get-all"==n?[_,d.outerHTML]:_}loge("cvm.js: Component has not been init'ed:",e)}static reg_menu(e,t){s.Menus[e]=t}static get_menu(e){return s.Menus[e]}static async dyn_screens(e){for(let t in e){let n=e[t],r=n[0],i=n[1],l=await a.Z.get(`${i}/${t}.html`,"text/plain"),_=await a.Z.get(`${i}/${t}.css`,"text/plain");s.init_screen(t,r,l,_)}}static async dyn_coms(e){for(let t in e){let n=e[t],r=n[0],i=n[1],l=await a.Z.get(`${i}/${t}.html`,"text/plain"),_=await a.Z.get(`${i}/${t}.css`,"text/plain");s.init_com(t,r,l,_)}}}window.cvm_=l,window.cvm=l,window.extend=Object.setPrototypeOf;const s=l,_=l},417:(e,t,n)=>{n.d(t,{Z:()=>l});const r=["encrypt","decrypt","wrapKey","unwrapKey"];class a{_____UTILS_____(){}_____Hash_Flow_____(){}static arraybuff2hex(e){return[...new Uint8Array(e)].map((e=>e.toString(16).padStart(2,"0"))).join("")}_____Enc_Flow_____(){}static text2arraybuff(e){return(new TextEncoder).encode(e).buffer}static arraybuff2base64(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,a=0;a<r;a++)t+=String.fromCharCode(n[a]);return window.btoa(t)}static typedarray2arraybuff(e){return e.buffer.slice(e.byteOffset,e.byteLength+e.byteOffset)}_____Dec_Flow_____(){}static hex2uint8arr(e){return Uint8Array.from(e.match(/.{1,2}/g).map((e=>parseInt(e,16))))}static basesf2arraybuff(e){var t=Uint8Array.from(atob(e),(e=>e.charCodeAt(0)));return typedarray2arraybuff(t)}static arraybuff2text(e){return new TextDecoder("utf-8").decode(e)}_____Imex_Flow_____(){}static base64url2base64(e){var t=e.replaceAll("-","+").replaceAll("_","/");return t.length%4!=0&&(t+="=".repeat(4-t.length%4)),t}_____RANDOM_____(){}static rand_bytes(e){return crypto.getRandomValues(new Uint8Array(e))}static rand_iv(){return i.rand_bytes(12)}static rand_uuid(){return window.crypto.randomUUID()}_____ANTI_BF_____(){}static inc_trycounter(e){e.value++}_____HASHING_____(){}static async md5(e){return null}static async sha1(e){var t=await crypto.subtle.digest("SHA-1",text2arraybuff(e));return arraybuff2hex(t)}static async sha256(e){var t=await crypto.subtle.digest("SHA-256",text2arraybuff(e));return arraybuff2hex(t)}static async sha512(e){var t=await crypto.subtle.digest("SHA-512",text2arraybuff(e));return arraybuff2hex(t)}_____SYMETRIC_____(){}_____Keys_____(){}static async gen_key_aes(){return await window.crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,r)}static async gen_statickey_aes(){return await i.gen_key_aes()}static async derive_key_aes(e,t=1e3){var n=await window.crypto.subtle.importKey("raw",text2arraybuff(e),{name:"PBKDF2"},!1,["deriveKey"]),a=Math.random().toString();return await window.crypto.subtle.deriveKey({name:"PBKDF2",salt:text2arraybuff(a),iterations:t,hash:"SHA-256"},n,{name:"AES-GCM",length:256},!0,r)}_____Encryption_____(){}static async enc_to_base64_aes(e,t){var n=i.rand_iv(),r=await crypto.subtle.encrypt({name:"AES-GCM",iv:n},t,text2arraybuff(e));return[arraybuff2base64(r),arraybuff2hex(typedarray2arraybuff(n))]}static async dec_from_base64_aes(e,t,n){var r=hex2uint8arr(t),a=await crypto.subtle.decrypt({name:"AES-GCM",iv:r},n,basesf2arraybuff(e));return arraybuff2text(a)}_____ASYMETRIC_____(){}_____Keys_____(){}static gen_keypair_rsa(){}static gen_keypair_ec(){}_____Encryption_____(){}static enc_to_base64_rsa(e,t){}static dec_from_base64_rsa(e,t){}static enc_to_base64_ec(e,t){}static dec_from_base64_ec(e,t){}_____Signing_____(){}static sign_rsa(e,t){}static verify_rsa(e,t){}static sign_ec(e,t){}static verify_ec(e,t){}_____AUTH_____(){}static reg_pubkey(e="rsa",t){}static sign_greeting(e,t="rsa",n){}_____IMEX_____(){}_____All_Key_Types_____(){}static async export_raw_key(e){var t=await crypto.subtle.exportKey("raw",e);return arraybuff2hex(t)}static async export_jwk_key(e){return await crypto.subtle.exportKey("jwk",e)}_____Im_Aes_____(){}static async import_rawkey_aes(e){var t=hex2uint8arr(e);return await crypto.subtle.importKey("raw",t,{name:"AES-GCM",length:256},!0,r)}static async import_jwkkey_aes(e){var t=basesf2arraybuff(base64url2base64(e.k)),n=arraybuff2hex(t);return await i.import_rawkey_aes(n)}_____Im_Rsa_____(){}_____Im_Ec_____(){}}window.enc_=a,window.text2arraybuff=a.text2arraybuff,window.arraybuff2base64=a.arraybuff2base64,window.arraybuff2hex=a.arraybuff2hex,window.typedarray2arraybuff=a.typedarray2arraybuff,window.basesf2arraybuff=a.basesf2arraybuff,window.hex2uint8arr=a.hex2uint8arr,window.arraybuff2text=a.arraybuff2text,window.base64url2base64=a.base64url2base64;const i=a,l=a},822:(e,t,n)=>{n.d(t,{Z:()=>a});const r=class{static async read_file(e=null){try{if(null==e){const[e]=await window.showOpenFilePicker(),t=await e.getFile();return[e,await t.text()]}const t=await e.getFile();return[e,await t.text()]}catch(e){return logw("files.js/read_file:",e),[null,null]}}static async write_file(e,t){e.requestPermission({mode:"readwrite"});const n=await e.createWritable();return await n.write(t),await n.close(),e}static async write_new_file(e,t="noname.txt"){try{const n=await window.showSaveFilePicker({suggestedName:t});return await r.write_file(n,e)}catch(e){return logw("files.js/write_new_file:",e),null}}static async make_rw(e){return await e.requestPermission({mode:"readwrite"})}static async pick_dir(){try{return await window.showDirectoryPicker({mode:"readwrite"})}catch(e){return logw("files.js/pick_dir:",e),null}}static async dir_get_items(e){e.requestPermission({mode:"readwrite"});var t=[];for await(const n of e.values())t.push(n);return t}static async dir_get_subdirs(e){var t=await r.dir_get_items(e),n=[];for(let e of t)"directory"==e.kind&&n.push(e);return n}static async dir_get_files(e){var t=await r.dir_get_items(e),n=[];for(let e of t)"file"==e.kind&&n.push(e);return n}static async dir_path2dir(e,t){try{var n=t.split("/"),r=e;for(let e of n)r=await r.getDirectoryHandle(e,{create:!0});return r}catch(e){return loge("Error:",e),null}}static async dir_path2file(e,t){try{var n=t.split("/"),r=e;for(let e=0;e<n.length-1;e++){let t=n[e];r=await r.getDirectoryHandle(t,{create:!0})}var a=n.length;return await r.getFileHandle(n[a-1],{create:!0})}catch(e){return loge("Error:",e),null}}static async dir_dir_exists(e,t){try{var n=t.split("/"),r=e;for(let e=0;e<n.length;e++){let t=n[e];r=await r.getDirectoryHandle(t,{create:!1})}return!0}catch{return!1}}static async dir_file_touch(e,t){return await r.dir_path2file(e,t)}static async dir_file_exists(e,t){try{if(null==t||0==t.trim().length)return!1;var n=t.split("/"),r=e;for(let e=0;e<n.length-1;e++){let t=n[e];r=await r.getDirectoryHandle(t,{create:!0})}var a=n.length;return await r.getFileHandle(n[a-1],{create:!1}),!0}catch{return!1}}},a=r},720:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(822);class a{static Rootdir=null;_____NODES_____(){}_____Node_Utils_____(){}static async get_altname_of(e){if(null!=e&&0!=e.trim().length){var t=i.Rootdir;if(-1==e.indexOf("/"))var n=e,a=await r.Z.dir_path2file(t,"wpower.gfsi");else{let i=e.split("/");n=i[i.length-1];let l=i.slice(0,i.length-1).join("/");a=await r.Z.dir_path2file(t,l+"/wpower.gfsi")}var[l,s]=await r.Z.read_file(a);if(0==s.trim().length)return null;var _=obj(s);return _.Altnames?_.Altnames[n]:null}}static async get_altnames_in(e){var t=i.Rootdir;if(null==e||0==e.trim().length)var n=await r.Z.dir_path2file(t,"wpower.gfsi");else n=await r.Z.dir_path2file(t,e+"/wpower.gfsi");var[a,l]=await r.Z.read_file(n);if(0==l.trim().length)return{};var s=obj(l);return s.Altnames?s.Altnames:{}}static async get_excnames_in(e){var t=i.Rootdir;if(null==e||0==e.trim().length)var n=await r.Z.dir_path2file(t,"wpower.gfsi");else n=await r.Z.dir_path2file(t,e+"/wpower.gfsi");var[a,l]=await r.Z.read_file(n);if(0==l.trim().length)return[];var s=obj(l);return s.Excnames?s.Excnames:[]}_____Node_Crud_____(){}static async create_real_node(e){if(null!=e&&0!=e.trim().length){if(await r.Z.dir_file_exists(i.Rootdir,e+".gfsn"))return new Error("gfsn-file-exists-of-same-name");await r.Z.dir_path2dir(i.Rootdir,e),await r.Z.dir_path2dir(i.Rootdir,e+"/index.md")}else loge("gfs.js: Error: Path can't be blank")}static async create_sym_node(e,t,n){if(null==e&&(e=""),null!=t&&0!=t.trim().length)if(null!=n&&0!=n.trim().length){if(await r.Z.dir_dir_exists(i.Rootdir,e))return new Error("dir-exists-of-same-name");if(0==e.trim().length)var a=await r.Z.dir_path2file(i.Rootdir,t+".gfsn");else a=await r.Z.dir_path2file(i.Rootdir,e+"/"+t+".gfsn");await r.Z.write_file(a,n)}else loge("gfs.js: Error: Target_Path can't be blank");else loge("gfs.js: Error: Name can't be blank")}static async read_node(e){if(null==e||0==e.trim().length)return null;e=e.replace(/\.gfsn$/,"");var t=i.Rootdir;return await r.Z.dir_dir_exists(t,e)?{Path:e,real:!0,sym:!1,Nexts:await i.get_nexts_of(e),Altname:await i.get_altname_of(e)}:await r.Z.dir_file_exists(t,e+".gfsn")?{Path:e,real:!1,sym:!0,Nexts:await i.get_nexts_of(e),Altname:await i.get_altname_of(e)}:null}static async update_node_name(e,t){e=e.trim();var n=i.Rootdir;if(-1==e.indexOf("/"))var a=e,l=await r.Z.dir_path2file(n,"wpower.gfsi");else{let t=e.split("/");a=t[t.length-1];let i=t.slice(0,t.length-1).join("/");l=await r.Z.dir_path2file(n,i+"/wpower.gfsi")}var[s,_]=await r.Z.read_file(l);0==_.trim().length&&(_="{}");var o=obj(_);null==o.Altnames&&(o.Altnames={}),o.Altnames[a]=t,await r.Z.write_file(l,str(o,null,4))}static async update_node_target(e,t){if(0!=(e=e.trim()).length){var n=i.Rootdir,a=await r.Z.dir_path2file(n,e+".gfsn");await r.Z.write_file(a,t.trim())}}static async update_node_weight(e,t){e=e.trim();var n=i.Rootdir;if(-1==e.indexOf("/"))var a=e,l=await r.Z.dir_path2file(n,"wpower.gfsi");else{let t=e.split("/");a=t[t.length-1];let i=t.slice(0,t.length-1).join("/");l=await r.Z.dir_path2file(n,i+"/wpower.gfsi")}var[s,_]=await r.Z.read_file(l);0==_.trim().length&&(_="{}");var o=obj(_);null==o.Weights&&(o.Weights={}),o.Weights[a]=t,await r.Z.write_file(l,str(o,null,4))}static async update_node_edge(e,t){e=e.trim();var n=i.Rootdir;if(-1==e.indexOf("/"))var a=e,l=await r.Z.dir_path2file(n,"wpower.gfsi");else{let t=e.split("/");a=t[t.length-1];let i=t.slice(0,t.length-1).join("/");l=await r.Z.dir_path2file(n,i+"/wpower.gfsi")}var[s,_]=await r.Z.read_file(l);0==_.trim().length&&(_="{}");var o=obj(_);null==o.Edges&&(o.Edges={}),o.Edges[a]=t,await r.Z.write_file(l,str(o,null,4))}static async delete_node(e){e=e.trim();var t=i.Rootdir;if(-1==e.indexOf("/"))var n=e,a=await r.Z.dir_path2file(t,"wpower.gfsi");else{let i=e.split("/");n=i[i.length-1];let l=i.slice(0,i.length-1).join("/");a=await r.Z.dir_path2file(t,l+"/wpower.gfsi")}var[l,s]=await r.Z.read_file(a);0==s.trim().length&&(s="{}");var _=obj(s);null==_.Excnames&&(_.Excnames=[]),-1==_.Excnames.indexOf(n)&&_.Excnames.push(n),await r.Z.write_file(a,str(_,null,4))}_____Node_Others_____(){}static async pin_node(e){var t=await r.Z.dir_path2file(i.Rootdir,"wpower.gfs"),[n,a]=await r.Z.read_file(t),l=obj(a);null==l.Pinneds?l.Pinneds=[e]:-1==l.Pinneds.indexOf(e)&&l.Pinneds.push(e),await r.Z.write_file(t,str(l,null,4))}static async get_pinned_nodes(e){var t=await r.Z.dir_path2file(i.Rootdir,"wpower.gfs"),[n,a]=await r.Z.read_file(t),l=obj(a);return null==l.Pinneds?[]:l.Pinneds}static async get_node_weights(e){if(null==e||0==e.trim().length)var t="wpower.gfsi";else t=e+"/wpower.gfsi";var n=await r.Z.dir_path2file(i.Rootdir,t),[a,l]=await r.Z.read_file(n);if(0==l.trim().length)return{};var s=obj(l);return null==s.Weights?{}:s.Weights}_____EDGES_____(){}static async get_nexts_of(e){if(await r.Z.dir_file_exists(i.Rootdir,e+".gfsn")){let t=await r.Z.dir_path2file(i.Rootdir,e+".gfsn"),[n,a]=await r.Z.read_file(t);e=a.trim()}if(null==e&&(e=""),0==(e=e.trim()).length)var t=i.Rootdir;else t=await r.Z.dir_path2dir(i.Rootdir,e);var n=await r.Z.dir_get_subdirs(t),a=await r.Z.dir_get_files(t),l=[];for(let t of a)if(null!=t.name.match(/\.gfsn$/)){let n;n=0==e.length?t.name.replace(".gfsn",""):e+"/"+t.name.replace(".gfsn",""),l.push({Path:n,sym:!0,real:!1,Nexts:null,Altname:await i.get_altname_of(n)})}var s=[];for(let t of n)0==e.trim().length?s.push({Path:t.name,sym:!1,real:!0,Nexts:null,Altname:await i.get_altname_of(t.name)}):s.push({Path:e+"/"+t.name,sym:!1,real:!0,Nexts:null,Altname:await i.get_altname_of(e+"/"+t.name)});var _=[...s,...l];return _.filter((e=>e.Path.trim().length>0))}_____OVERALL_____(){}static async recurse_for_nodes(e,t,n,a){var l=await r.Z.dir_get_items(t);for(let s of l){if("directory"!=s.kind&&null==s.name.match(/\.gfsn$/))continue;let l=null==n?s.name:n+"/"+s.name,_=await i.read_node(l);if(e.push({..._,depth:a}),!_.sym){let n=await r.Z.dir_path2dir(t,s.name);await i.recurse_for_nodes(e,n,l,a+1)}}}static async is_unconnected(e){if(0!=e.depth)return!1;if(e.real){let t=await r.Z.dir_path2dir(i.Rootdir,e.Path);return 0==(await r.Z.dir_get_items(t)).length}{let t=await r.Z.dir_path2file(i.Rootdir,e.Path+".gfsn"),[n,a]=await r.Z.read_file(t);return 0==a.trim().length}}static async get_all_nodes(){var e=[];await i.recurse_for_nodes(e,i.Rootdir,null,0);var t={All:e,Realnodes:[],Symnodes:[],Starters:[],Unconnecteds:[],Pinneds:[]};for(let n of e){let e=await i.is_unconnected(n);n.real&&t.Realnodes.push(n),n.sym&&t.Symnodes.push(n),0==n.depth&&(e?t.Unconnecteds.push(n):t.Starters.push(n))}return t.Pinneds=await i.get_pinned_nodes(),t}_____INTEGRITY_____(){}static async check_integrity(){}static async fix_integrity(e,t){}_____CORE_____(){}static async init(){try{var e=await r.Z.pick_dir(),t=await r.Z.dir_get_items(e),n=await r.Z.dir_file_exists(e,"wpower.gfs");if(t.length>0&&!n)return void log("Error: Not Wpower GFS folder and it's not empty");if(await r.Z.dir_file_exists(e,"wpower.gfs"))return log("gfs.js: GFS already init'ed in",e.name),i.Rootdir=e,"ok";var a=await r.Z.dir_path2file(e,"wpower.gfs");return await r.Z.write_file(a,"{}"),i.Rootdir=e,"ok"}catch(e){return void log("Error: ",e)}}static async init_fts(){}}window.gfs=a;const i=a,l=a},733:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(742);const a=class{static get_email(){}static get_sid(){}};class i{static Auth=a;static async get(e,t="application/json"){try{var n=await(await fetch(e)).text();if("application/json"==t)try{return JSON.parse(n)}catch{return null}return n}catch{return null}}static async post(e,t,n="application/json"){try{var r=await fetch(e,{method:"POST",body:JSON.stringify(t)}),a=await r.text();if("application/json"==n)try{return JSON.parse(a)}catch{return log("Non JSON response:",a),null}return a}catch{return null}}static async call_api(e,t={}){var n=l.Auth.get_email(),a=l.Auth.get_sid();return null==a||0==a.length?(r.Z.alert(__h("YOU_NEED_TO_LOGIN_FIRST")),new Error("need-auth")):(null==t&&(t={}),t.Email_=n,t.Sid_=a,await l.post(e,t))}static async call_pub_api(e,t={}){return await l.post(e,t)}_____CORE_____(){}static init(e){l.Auth=e}}window.net=i;const l=i,s=i},516:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(81),a=n.n(r),i=n(645),l=n.n(i)()(a());l.push([e.id,".wp-color-cell {\n    width:1.5rem; display:inline-block; border:1px solid silver;\n}\n/* EOF */",""]);const s=l},461:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(81),a=n.n(r),i=n(645),l=n.n(i)()(a());l.push([e.id,".wp-richtext {\n    resize:vertical; height:calc(50vh - 7 * var(--line-h));\n    border:1px solid silver; overflow:auto; outline:none;\n}\n.wp-rt-btn {\n    height:var(--line-h); vertical-align:bottom;\n}\n/* EOF */",""]);const s=l},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,a,i){"string"==typeof e&&(e=[[null,e,void 0]]);var l={};if(r)for(var s=0;s<this.length;s++){var _=this[s][0];null!=_&&(l[_]=!0)}for(var o=0;o<e.length;o++){var c=[].concat(e[o]);r&&l[c[0]]||(void 0!==i&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=i),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),a&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=a):c[4]="".concat(a)),t.push(c))}},t}},81:e=>{e.exports=function(e){return e[1]}},742:(e,t,n)=>{n.d(t,{Z:()=>w});var r=n(21),a=n(583),i=n(941);function l(e){var t=(e=Math.floor(e)%256).toString(16);return t.length<2&&(t="0"+t),t}class s extends i.Z{constructor(){super()}get_colors(e){var t=Math.floor,n=255/e,r=[];for(let a=0;a<=e;a++)for(let i=0;i<=e;i++)for(let l=0;l<=e;l++)r.push({r:t(a*n),g:t(i*n),b:t(l*n)});for(let e=0;e<r.length;e++)r[e]="#"+l(r[e].r)+l(r[e].g)+l(r[e].b);return r}_____CORE_____(){}init(){super.init(this),this.Data.Colors=this.get_colors(5)}render(){}async load_data(){}}const _=s;var o=n(516);class c extends i.Z{constructor(){super()}_____UTILS_____(){}insert(e){var t=new_ele("span");t.innerHTML=e;var n=window.getSelection();n.getRangeAt(0).insertNode(t),n.collapseToEnd()}_____UI_ACTIONS_____(){}insert_dot(e){this.insert("<ul><li>&#32;</li></ul>")}insert_num(e){this.insert("<ol><li>&#32;</li></ol>")}insert_emptytick(e){this.insert("◻&nbsp;")}insert_tick(e){this.insert("✓&nbsp;")}_____UI_EVENTS_____(){}on_edit_key(e){}_____CORE_____(){}init(){super.init(this)}render(){}async load_data(){}}const d=c;var u=n(461);function p(e,t,n){return e[n]<t[n]?-1:e[n]>t[n]?1:0}class f{static menu_shown=!1;static Treeitem_Displays={};_____UTILS_____(){}static get_ele_value(e){var t=e.value.trim();return[e.attr("class").trim().split(" ")[0].split("-").map((e=>e[0].toUpperCase()+e.slice(1))).join("_"),t]}_____BASICS_____(){}static async alert(e,t=null){var n=Math.random().toString().replace(".",""),r=new_ele("div");r.attr("id","Alert"+n),r.css({position:"fixed",left:0,top:0,width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"transparent"});var a=`<style>\n            @media(max-width:999px){\n                .ui-alert-box { width:100vw !important; left:0 !important; }\n            }\n        </style>\n        <span style="width:100vw; height:100vh; background-color:black;\n            opacity:.5;">&nbsp;</span>\n        <span class="ui-alert-box" style="width:50vw; height:50vh; background-color:white;\n                position:fixed; left:25vw; top:25vh;">\n            <div style="background-color:#ddd; padding-left:var(--line-h);">\n                <big>${__h("MESSAGE")}</big>\n            </div>\n            <div style="padding:var(--line-h); max-height:calc(50vh - 2 * var(--line-h));\n                overflow:auto;">${e}</div>\n            <div style="background-color:#eee; padding-left:var(--line-h);\n                    line-height:calc(1 * var(--line-h));">\n                <button id="Alertok${n}" style="transform:scale(1);\n                        transform-origin:top left; vertical-align:top;\n                        height:calc(1 * var(--line-h)); padding-left:1.5rem;\n                        padding-right:1.5rem;">\n                    ${__h("OKAY")}\n                </button>\n            </div>\n        </span>`;r.innerHTML=a,d$("body").appendChild(r);var i=d$("#Alertok"+n),[l,s]=new_lock();i.on("click",(e=>{s(null),d$("#Alert"+n).remove()})),null!=t&&t(r),await l}static async confirm(e){var t=Math.random().toString().replace(".",""),n=new_ele("div");n.attr("id","Confirm"+t),n.css({position:"fixed",left:0,top:0,width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"transparent"});var r=`<style>\n            @media(max-width:999px){\n                .ui-cf-box { width:100vw !important; left:0 !important; }\n            }\n        </style>\n        <span style="width:100vw; height:100vh; background-color:black;\n            opacity:.5;">&nbsp;</span>\n        <span class="ui-cf-box" style="width:50vw; height:50vh; background-color:white;\n                position:fixed; left:25vw; top:25vh;">\n            <div style="background-color:#ddd; padding-left:var(--line-h);">\n                <big>${__h("CONFIRMATION")}</big>\n            </div>\n            <div style="padding:var(--line-h); max-height:calc(50vh - 2 * var(--line-h));\n                overflow:auto;">${e}</div>\n            <div style="background-color:#eee; padding-left:var(--line-h);\n                    line-height:calc(1 * var(--line-h));">\n                <button id="Confirmyes${t}" style="transform:scale(1);\n                        transform-origin:top left; vertical-align:top;\n                        height:calc(1 * var(--line-h)); padding-left:1.5rem;\n                        padding-right:1.5rem;">\n                    ${__h("YES")}\n                </button> &nbsp;\n                <button id="Confirmno${t}" style="transform:scale(1);\n                        transform-origin:top left; vertical-align:top;\n                        height:calc(1 * var(--line-h)); padding-left:1.5rem;\n                        padding-right:1.5rem;">\n                    ${__h("NO")}\n                </button>\n            </div>\n        </span>`;n.innerHTML=r,d$("body").appendChild(n);var[a,i]=new_lock();return d$("#Confirmyes"+t).on("click",(e=>{i("yes"),d$("#Confirm"+t).remove()})),d$("#Confirmno"+t).on("click",(e=>{i("no"),d$("#Confirm"+t).remove()})),await a}static async prompt(e,t="",n=""){var r=Math.random().toString().replace(".",""),a=new_ele("div");a.attr("id","Input"+r),a.css({position:"fixed",left:0,top:0,width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"transparent"});var i=`<style>\n            @media(max-width:999px){\n                .ui-prom-box { width:100vw !important; left:0 !important; }\n            }\n        </style>\n        <span style="width:100vw; height:100vh; background-color:black;\n            opacity:.5;">&nbsp;</span>\n        <span class="ui-prom-box" style="width:50vw; height:50vh; background-color:white;\n                position:fixed; left:25vw; top:25vh;">\n            <div style="background-color:#ddd; padding-left:var(--line-h);">\n                <big>${__h("INPUT")}</big>\n            </div>\n            <div style="padding:var(--line-h); max-height:calc(50vh - 2 * var(--line-h));\n                    overflow:auto;">\n                ${e}<br>\n                <input id="Inp${r}" type="${n}" style="width:100%;"/>\n            </div>            \n            <div style="background-color:#eee; padding-left:var(--line-h);\n                    line-height:calc(1 * var(--line-h));">\n                <button id="Inputok${r}" style="transform:scale(1);\n                        transform-origin:top left; vertical-align:top;\n                        height:calc(1 * var(--line-h)); padding-left:1.5rem;\n                        padding-right:1.5rem;">\n                    ${__h("OKAY")}\n                </button> &nbsp;\n                <button id="Inputcancel${r}" style="transform:scale(1);\n                        transform-origin:top left; vertical-align:top;\n                        height:calc(1 * var(--line-h)); padding-left:1.5rem;\n                        padding-right:1.5rem;">\n                    ${__h("CANCEL")}\n                </button>\n            </div>\n        </span>`;a.innerHTML=i,d$("body").appendChild(a);var l=d$("#Inp"+r);l.focus(),l.value=t;var[s,_]=new_lock();return d$("#Inputok"+r).on("click",(e=>{_(l.value.trim()),d$("#Input"+r).remove()})),d$("#Inputcancel"+r).on("click",(e=>{_(null),d$("#Input"+r).remove()})),d$("#Inp"+r).on("keydown",(e=>"Enter"==e.key?(_(l.value.trim()),void d$("#Input"+r).remove()):"Escape"==e.key?(_(null),void d$("#Input"+r).remove()):void 0)),await s}static async select(e,t,n=null,r=!1){var a=Math.random().toString().replace(".",""),i=new_ele("div");if(i.attr("id","Select"+a),i.css({position:"fixed",left:0,top:0,width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"transparent"}),!0===r)var l="multiple",s="calc(10 * var(--line-h))",_="max-height:calc((50vh - 2 * var(--line-h)) / 2);",o=`<div><small>${__h("PRESS_CTRL_TO_SELECT_MULTIPLE")}</small></div>`;else l="",s="var(--line-h)",_="",o="";var c="";for(let e in t)c+=e==n?`<option value="${esca(e)}" selected>${__h(t[e])}</option>`:`<option value="${esca(e)}">${__h(t[e])}</option>`;var d=`<style>\n            @media(max-width:999px){\n                .ui-sel-box { width:100vw !important; left:0 !important; }\n            }\n        </style>\n        <span style="width:100vw; height:100vh; background-color:black;\n            opacity:.5;">&nbsp;</span>\n        <span class="ui-sel-box" style="width:50vw; height:50vh; background-color:white;\n                position:fixed; left:25vw; top:25vh;">\n            <div style="background-color:#ddd; padding-left:var(--line-h);">\n                <big>${__h("SELECT")}</big>\n            </div>\n            <div style="padding:var(--line-h); max-height:calc(50vh - 2 * var(--line-h));\n                overflow:auto;">${e}${o}\n            </div>            \n            <div>\n                <select id="Selectinp${a}" ${l} style="margin-left:var(--line-h);\n                    height:${s}; width:calc(50vw - 2 * var(--line-h));\n                    font-size:var(--f-size); ${_}">${c}</select>\n            </div>\n            <div>&nbsp;</div>\n            <div style="background-color:#eee; padding-left:var(--line-h);\n                    line-height:calc(1 * var(--line-h));">\n                <button id="Selectok${a}" style="transform:scale(1);\n                        transform-origin:top left; vertical-align:top;\n                        height:calc(1 * var(--line-h)); padding-left:1.5rem;\n                        padding-right:1.5rem;">\n                    ${__h("OKAY")}\n                </button>\n                <button id="Selectcancel${a}" style="transform:scale(1);\n                        transform-origin:top left; vertical-align:top;\n                        height:calc(1 * var(--line-h)); padding-left:1.5rem;\n                        padding-right:1.5rem;">\n                    ${__h("CANCEL")}\n                </button>\n            </div>\n        </span>`;i.innerHTML=d,d$("body").appendChild(i);var[u,p]=new_lock();return d$("#Selectok"+a).on("click",(e=>{p(0==r?d$("#Selectinp"+a).value:[...d$("#Selectinp"+a).selectedOptions].map((e=>e.value))),d$("#Select"+a).remove()})),d$("#Selectcancel"+a).on("click",(e=>{p(null),d$("#Select"+a).remove()})),await u}static async select_many(e,t,n=null){return await h.select(e,t,n,!0)}static async select_with_btns(e,t,n={}){if(null==n.Item_Width)var r="100%";else r=n.Item_Width;var a="";for(let e in t)a+=`<button value-text="${esca(e)}" class="wp-select-item-btn"\n            style="width:${r}; text-align:left;">${esch(t[e])}</button>`;e=null!=e?`<div>${e}<div>&nbsp;</div></div>${a}`:a;var[i,l]=new_lock(),s=h.alert(e,(e=>{for(let t of e$$(e,".wp-select-item-btn"))t.on("click",(t=>{l(t.target.attr("value-text")),e.remove()}));!0===n.close_on_outerclick&&e$(e,".ui-alert-box").previousElementSibling.on("click",(()=>{l(null),e.remove()}))}));return await Promise.race([i,s])}static async dialog(e,t,n={},r=null){var a=Math.random().toString().replace(".",""),i=new_ele("div");i.attr("id","Dialog"+a),i.attr("class","wpower-dlg"),i.css({position:"fixed",left:0,top:0,width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"transparent"});var[l,s]=cvm_.render_com(t,n,"get-all"),s=`<style>\n            @media(max-width:999px){\n                .ui-dlg-box { width:100vw !important; left:0 !important; }\n            }\n        </style>\n        <span style="width:100vw; height:100vh; background-color:black;\n            opacity:.5;">&nbsp;</span>\n        <span class="ui-dlg-box" style="width:50vw; height:50vh; background-color:white;\n                position:fixed; left:25vw; top:25vh;">\n            <div style="background-color:#ddd; padding-left:var(--line-h);">\n                <big>${e}</big>\n            </div>\n            <div style="padding:var(--line-h); max-height:calc(50vh - 2 * var(--line-h));\n                overflow:auto;">${s}</div>\n            <div class="wp-dlg-btns" style="background-color:#eee; padding-left:var(--line-h);\n                    line-height:calc(1 * var(--line-h));">\n                <button id="Dialogok${a}" style="transform:scale(1);\n                        transform-origin:top left; vertical-align:top;\n                        height:calc(1 * var(--line-h)); padding-left:1.5rem;\n                        padding-right:1.5rem;">\n                    ${__h("OKAY")}\n                </button>\n            <button id="Dialogcancel${a}" style="transform:scale(1);\n                        transform-origin:top left; vertical-align:top;\n                        height:calc(1 * var(--line-h)); padding-left:1.5rem;\n                        padding-right:1.5rem;">\n                    ${__h("CANCEL")}\n                </button>\n            </div>\n        </span>`;i.innerHTML=s,d$("body").appendChild(i);var _=`div[key="${l.Key}"]`;l.Wrapper=e$(i,_),d$(_).Controller=l;var[o,c]=new_lock();return d$("#Dialogok"+a).on("click",(e=>{var t={},n=e$$(i,"input"),r=e$$(i,"select"),l=e$$(i,"textarea");for(let e of[...n,...r,...l]){let[n,r]=h.get_ele_value(e);t[n]=r}var s=e$$(i,"*[contenteditable]");for(let e of s){let n=e.classList[0];null!=n&&0!=n.trim().length||logw("ui.js/dialog: Bad contenteditable class:",n),t[n]=e.innerHTML.trim()}c(t),d$("#Dialog"+a).remove()})),d$("#Dialogcancel"+a).on("click",(e=>{c(null),d$("#Dialog"+a).remove()})),null!=r&&r(i),await o}static no_dlg_buttons(){var e=d$$(".wp-dlg-btns");for(let t of e)t.remove()}static close_dialogs(){var e=d$$(".wpower-dlg");for(let t of e)t.remove()}static notif(e,t="black"){if(null==d$("#Notif-Col")){let e=new_ele("div");e.attr("id","Notif-Col"),e.css({height:"auto",position:"fixed",right:0,bottom:0,display:"flex",alignItems:"flex-start",justifyContent:"flex-end",flexDirection:"column"}),d$("body").appendChild(e)}var n="Notif"+Math.random().toString().replace(".",""),r=d$("#Notif-Col"),a=new_ele("div");a.attr("id",n),a.innerHTML=e,a.css({padding:"1.5rem",backgroundColor:"#eee",color:t,borderRadius:"1rem"}),r.appendChild(a),a.on("click",(()=>{d$("#"+n)?.remove()})),setTimeout((()=>{d$("#"+n)?.remove()}),5e3)}static native_notif(e){Notification.requestPermission().then((()=>{new Notification(e)}))}_____ADVANCED_____(){}static async pick_color(){var e=null,t=h.dialog(__h("PICK_COLOUR"),"color-picker",{}),[n,r]=new_lock();for(let t of d$$(".wp-color-cell"))t.on("click",(t=>{e=t.target.attr("color"),r(e),h.close_dialogs()}));return t.then((()=>{r(null)})),await n}static async prompt_richtext(e,t="",n=!1){var r=await h.dialog(__h("INPUT"),"richtext-edit",{Msg_Html:e,Default:t});if(null==r)return null;if(0==n)return r.richtext.trim();var a=new_ele("div");return a.innerHTML=r.richtext.replaceAll("<"," <"),a.innerText.trim().replace(/[\s]{2,}/g," ")}_____Tree_____(){}static treeitem_html(e,t,n,r){if(null==e.Data_Id&&loge("ui.js/treeitem_html: Missing Data_Id field in",e),n)if(e.depth>r){var a="hidden";h.Treeitem_Displays[t][e.Data_Id]=!1}else a="",h.Treeitem_Displays[t][e.Data_Id]=!0;else a=h.Treeitem_Displays[t][e.Data_Id]?"":"hidden";var i,l,s=`<div data-id='${e.Data_Id}' class="wp-tree-item"\n        depth="${e.depth}" pa-data-id="${e.Pa_Data_Id}" tree-id="${t}" ${a}\n        is-section="${e.is_section}" style="white-space:nowrap;">`;s+=`<div class="wp-tree-dropbefore" tree-id="${t}" pa-data-id="${e.Pa_Data_Id}" \n                data-id="${e.Data_Id}" is-section="${e.is_section}" \n                style="height:5px; line-height:5px;">&nbsp;</div>`,s+='<div style="height:calc(var(--line-h) - 5px); line-height:calc(var(--line-h) - 5px);">',i=e.hide_root?e.depth-1:e.depth;for(let e=0;e<i;e++)s+=`<span class="wp-tree-indent" depth="${e}" \n            style="display:inline-flex; width:var(--line-h); transform:scale(1,2);\n            justify-content:center; align-items:center; pointer-events:none;">&nbsp;</span>`;if(l=null!=e.Icon?e.Icon:"🔷",s+=`<span data-id="${e.Data_Id}" title="${__a("CLICK_ICON_TO_TOGGLE_CHILDREN")}" \n        class="wp-treeitem-icon" tree-id="${t}" is-section="${e.is_section}"\n        style="cursor:pointer; user-select:none;">${l}</span>`,e.is_section)var _="";else _='draggable="true"';return null!=e.Children&&e.Children.length>0?s+=`<span class="wp-tree-text" tree-id="${t}" data-id="${e.Data_Id}" \n            pa-data-id="${e.Pa_Data_Id}" ${_} is-section="${e.is_section}"\n            style="cursor:pointer; user-select:none;"\n            ><b>${e.Text}</b></span>`:s+=`<span class="wp-tree-text" tree-id="${t}" data-id="${e.Data_Id}" \n            pa-data-id="${e.Pa_Data_Id}" ${_} is-section="${e.is_section}"\n            style="cursor:pointer; user-select:none;"\n            >${e.Text}</span>`,1==e.is_section||(s+=`<span class="wp-tree-menubtn" tree-id="${t}" data-id="${e.Data_Id}" \n            style="cursor:pointer;">&nbsp;...&nbsp;</span>`),s+"</div></div>"}static add_sibling_lines(e){var t=e$$(e,".wp-tree-item");for(let e of t){let t,n=parseInt(e.attr("depth")),r=Number.MAX_SAFE_INTEGER,a=e.previousElementSibling;if(null!=a&&(r=parseInt(a.attr("depth")),t="true"==a.attr("is-section")),r==n-1||t){let t=[],r=e;for(;null!=r.nextElementSibling&&!(parseInt(r.nextElementSibling.attr("depth"))<n)&&("true"!=r.nextElementSibling.attr("is-section")||parseInt(r.nextElementSibling.attr("depth"))!=n);)t.push(r.nextElementSibling),r=r.nextElementSibling;let a=t.length;for(a>0&&1==t[a-1].attr("is-section")&&parseInt(t[a-1].attr("depth"))==n&&(t=t.slice(0,a-1));t.length>0;){let e=t.length,r=parseInt(t[e-1].attr("depth"));if(r==n)break;r>n&&(t=t.slice(0,e-1))}for(let e of t){let t=e$(e,`span[depth="${n}"]`);null!=t&&(t.innerHTML="︱")}}}}static tree_toggle_child_items(e,t){for(var n=e.target.attr("data-id"),r=e$(t,`.wp-tree-item[data-id="${n}"]`),a=r.attr("tree-id"),i=[],l=r,s=parseInt(r.attr("depth"));null!=l.nextElementSibling&&!(parseInt(l.nextElementSibling.attr("depth"))<=s);)i.push(l.nextElementSibling),l=l.nextElementSibling;if(0!=i.length){if(i[0].is_shown())var _=!1;else _=!0;for(let e of i)e.hide(),h.Treeitem_Displays[a][e.attr("data-id")]=!1;if(1==_)for(let e of i)parseInt(e.attr("depth"))==s+1&&(e.disp(_),h.Treeitem_Displays[a][e.attr("data-id")]=_)}}static is_valid_drag(e,t,n){if(t==n)return!1;for(var r=e$(e,`.wp-tree-item[data-id="${n}"]`),a=0;;){if(a>100)return!1;let n=r.attr("pa-data-id");if(null==n)break;let i=e$(e,`.wp-tree-item[data-id="${n}"]`);if(null==i)break;if(n==t)return!1;r=i,a++}return!0}static tree_item_up_from(e){for(;null!=e&&!e.classList.contains("wp-tree-item");)e=e.parentElement;return e}static get_sibling_weights(e,t){var n=d$(`.wp-tree-item[data-id="${e}"]`).attr("pa-data-id"),a=d$$(`.wp-tree-item[pa-data-id="${n}"]`);a=a.filter((e=>"true"!=e.attr("is-section")));var i=0,l=0;for(let t=0;t<a.length;t++)if(a[t].attr("data-id")==e){i=t;break}for(let e=0;e<a.length;e++)if(a[e].attr("data-id")==t){l=e;break}r.Z.move(a,i,l);var s={};for(let e=0;e<a.length;e++)s[a[e].attr("data-id")]=e;return s}static show_sectioned_tree(e,t,n,r={}){null==r.display_upto_level?r.display_upto_level=1:"max"==r.display_upto_level&&(r.display_upto_level=Number.MAX_SAFE_INTEGER);var a=[];!function e(t,n,a,i){n.depth=a,null==n.Children&&(n.Children=[]),!0===r.hide_root?n.hide_root=!0:n.hide_root=!1,n.Data_Id,t.push(n);var l="az";null!=r.Sort&&(l=r.Sort),"az"==l?n.Children.sort(((e,t)=>p(e,t,"Text"))):"za"==l?n.Children.sort(((e,t)=>function(e,t,n){return e[n]>t[n]?-1:e[n]<t[n]?1:0}(e,t,"Text"))):n.Children.sort(((e,t)=>p(e,t,"weight")));var s=[];for(let e of n.Children)s.push(e.Section);(s=[...new Set(s)]).sort();var _={};for(let e of s){_[e]=[];for(let t of n.Children)t.Section!=e||0!=t.is_section&&null!=t.is_section||_[e].push(t)}var o=[];for(let e of s)if(null!=e){o.push({Icon:"➖",Text:"<i>"+e+"</i>:",is_section:!0,Section:e,Data_Id:i+"/"+e});for(let t of _[e])o.push(t)}for(let e of s)if(null==e){o.push({Icon:"➖",Text:"<i>"+e+"</i>:",is_section:!0,Section:e,Data_Id:i+"/"+e});for(let t of _[e])o.push(t)}if(0==s.length);else if(1==s.length&&null==s[0])n.Children=o.filter((e=>null!=e.Section||null==e.Section&&null==e.is_section));else if(s.filter((e=>null!=e)).length==s.length)n.Children=o;else{for(let e=0;e<o.length;e++)o[e].is_section&&null==o[e].Section&&(o[e].Text=`<i>${__h("NO_SECTION")}</i>:`);n.Children=o}for(let r of n.Children)r.Pa_Data_Id=n.Data_Id,e(t,r,a+1,i+"/"+n.Data_Id)}(a,t,0,""),!0===r.hide_root&&(a=a.slice(1));var i=!1;null==h.Treeitem_Displays[e]&&(h.Treeitem_Displays[e]={},i=!0);var l=a.map((t=>h.treeitem_html(t,e,i,r.display_upto_level)));n.innerHTML=l.join(""),h.add_sibling_lines(n);var s=e$$(n,".wp-treeitem-icon");for(let e of s)e.on("click",(e=>{h.tree_toggle_child_items(e,n)}));s=(s=e$$(n,".wp-tree-text")).filter((e=>"true"!=e.attr("is-section")));for(let e of s)e.on("click",(t=>{r.on_click_item(t,e.attr("tree-id"),e.attr("data-id"))}));s=e$$(n,".wp-tree-menubtn");for(let e of s)e.on("click",(t=>{h.show_menu(t,e,[[__h("IC_ADD_CHILD"),async(e,t)=>{var a=e.target.attr("tree-id"),i=await r.on_add_child(e,a,t);h.show_sectioned_tree(a,i,n,r)}],[__h("IC_RENAME"),async(e,t)=>{var a=e.target.attr("tree-id"),i=await r.on_rename(e,a,t);h.show_sectioned_tree(a,i,n,r)}],[__h("IC_DELETE"),async(e,t)=>{var a=e.target.attr("tree-id"),i=await r.on_delete(e,a,t);h.show_sectioned_tree(a,i,n,r)}]])}));s=(s=e$$(n,".wp-tree-text")).filter((e=>"true"!=e.attr("is-section")));for(let t of s)h.set_ondragstart(t,{Tree_Id:e,Data_Id:t.attr("data-id"),Pa_Data_Id:t.attr("pa-data-id")}),h.set_ondrop(t,(async(t,a,i)=>{var l=obj(i);if(null!=l){var s=h.tree_item_up_from(t.target);if(h.is_valid_drag(n,l.Data_Id,s.attr("data-id"))){var _=await r.on_drop_into(t,e,l.Data_Id,s.attr("data-id"));h.show_sectioned_tree(e,_,n,r)}else f.alert(__h("CANT_DRAG_INSIDE"))}}));s=(s=e$$(n,".wp-tree-dropbefore")).filter((e=>"true"!=e.attr("is-section")));for(let t of s)h.set_ondrop(t,(async(t,a,i)=>{var l=obj(i);if(null!=l){var s=h.tree_item_up_from(t.target);if(h.is_valid_drag(n,l.Data_Id,s.attr("data-id"))){var _=!1;if(d$(`.wp-tree-item[data-id="${l.Data_Id}"]`).attr("pa-data-id")==s.attr("pa-data-id")&&(_=!0),_)o=h.get_sibling_weights(l.Data_Id,s.attr("data-id"));else var o={};var c=await r.on_drop_before(t,e,l.Data_Id,s.attr("data-id"),_,o);h.show_sectioned_tree(e,c,n,r)}else f.alert(__h("CANT_DRAG_INSIDE"))}}))}_____MENUS_____(){}static find_ancestor(e,t){if(e.classList.contains(t))return e;for(;null!=e.parentElement;){if(e.parentElement.classList.contains(t))return e.parentElement;e=e.parentElement}return null}static show_menu(e,t,n,r=!1){if(0==r)for(let e of d$$(".ctx-menu"))e.remove();for(let e=0;e<n.length;e++)n[e]instanceof Array&&(n[e]={Text:n[e][0],callback:n[e][1],Children:n[e][2]},null!=n[e].Children&&n[e].Children.length>0?n[e].Marker='<span style="float:right;">»&nbsp;</span>':n[e].Marker="");if(null!=t)var a=(d=t.getBoundingClientRect()).x,i=d.y,l=d.height;else e.preventDefault(),a=e.clientX,i=e.clientY,l=0;window.innerWidth;var s,_=window.innerHeight;s=i<_/2?"below":"above",!0===r&&(a+=d.width+10,"below"==s?i-=d.height+10:i+=d.height+10);var o=new_ele("div");o.classList.add("ctx-menu"),o.css({position:"fixed",left:a+"px",backgroundColor:"#eee",border:"1px solid silver",borderRadius:"5px",padding:"10px"});var c="";"above"==s?o.css({bottom:_-i+"px"}):o.css({top:i+l+"px"});for(let e=0;e<n.length;e++){let t=n[e];"---sep---"!=t.Text?c+=`<div idx="${e}" class="ctx-menu-item" style="cursor:pointer;\n                        user-select:none; white-space:nowrap;"\n                    >${esch(t.Text)+t.Marker}\n                </div>`:c+='<div style="user-select:none;"><hr></div>'}o.innerHTML=c;var d,u=e$$(o,".ctx-menu-item");for(let e of u)e.Childitems=n[parseInt(e.attr("idx"))].Children;d$("body").appendChild(o),(d=o.getBoundingClientRect()).x+d.width>window.innerWidth&&(window.innerWidth,d.x,o.css({left:window.innerWidth-d.width+"px"}));for(let t of u)t.on("click",(r=>{if(r.target.Childitems)h.show_menu(r,t,r.target.Childitems,!0);else{var a=parseInt(r.target.attr("idx")),i=n[a].callback;o.remove(),h.menu_shown=!1,"function"==typeof i?i(e,e.target.attr("data-id")):logw(`ui.js/show_menu: Method for '${n[a].Text}' not found:`,i)}}));function p(e){null==h.find_ancestor(e.target,"ctx-menu")&&(o.remove(),h.menu_shown=!1,d$("body").removeEventListener("click",p))}setTimeout((()=>{d$("body").on("click",p)}),10),h.menu_shown=!0}static close_menu(){for(let e of d$$(".ctx-menu"))e.remove();h.menu_shown=!1}_____MISCS_____(){}static async show_err(e){await h.alert("Error: "+e)}static async alert_noauth(){h.alert(__h("PLEASE_LOG_IN_TO_SAVE"))}_____DRAGDROP_____(){}static set_ondragstart(e,t){e.on("dragstart",(e=>{var n=e.target.rect(),r=e.clientX,a=e.clientY;t={...t,ele_x:n.x,ele_y:n.y,ele_w:n.width,ele_h:n.height,drag_x:r,drag_y:a},e.dataTransfer.setData("Text",str(t))}))}static set_ondrop(e,t){e.on("dragover",(e=>{e.preventDefault()})),e.on("dragenter",(t=>{e.attr("computed-bg",r.Z.get_style(e,"backgroundColor")),e.style.backgroundColor="yellow"})),e.on("dragleave",(t=>{var n=e.attr("computed-bg");e.style.backgroundColor=n})),e.on("drop",(n=>{var r=e.attr("computed-bg");e.style.backgroundColor=r;var a=n.dataTransfer.getData("URL"),i=n.dataTransfer.getData("text");null!=a&0==a.trim().length&&(a=null),null!=i&0==i.trim().length&&(i=null),n.preventDefault(),t(n,a,i)}))}_____CORE_____(){}static init(){a.Z.init_com("color-picker",_,'<span for="C: let C of Colors">\n    <span class="wp-color-cell" color="{{this}}"\n    style="background-color:{{this}}">&nbsp;</span>\n</span>\n\x3c!-- EOF --\x3e',o.Z),a.Z.init_com("richtext-edit",d,'<div>{{Msg_Html}}</div>\n<div>\n    <button class="wp-rt-btn" title="[[ENTER_TWICE_TO_GET_OUT_OF_DOT]]"\n        onclick="method:insert_dot">&nbsp;•&nbsp;</button>\n    <button class="wp-rt-btn" title="[[ENTER_TWICE_TO_GET_OUT_OF_DOT]]"\n        onclick="method:insert_num">&nbsp;1.&nbsp;</button>\n    <button class="wp-rt-btn" onclick="method:insert_emptytick">◻</button>\n    <button class="wp-rt-btn" onclick="method:insert_tick">✓</button>\n</div>\n<div class="richtext wp-richtext" contenteditable\n    onkeydown="method:on_edit_key">{{Default}}</div>\n\x3c!-- EOF --\x3e',u.Z)}}window.ui=f;const h=f,w=f},21:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _cvm_cvm_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(583);function OX_INDENT_Result(){}function _____PROTOTYPE_____(){}function _____CLASS_____(){}Element.prototype.attr=function(e,t){if(null==t)return this.getAttribute(e);this.setAttribute(e,t)},Element.prototype.attrs=function(){return this.getAttributeNames()},Element.prototype.css=function(e){for(let t in e)this.style[t]=e[t]},Element.prototype.html=function(e){if(null==e)return this.innerHTML;this.innerHTML=e},Element.prototype.clear=function(){this.innerHTML=""},Element.prototype.rect=function(){return this.getBoundingClientRect()},Element.prototype.show=function(){this.removeAttribute("hidden")},Element.prototype.hide=function(){this.setAttribute("hidden","true")},Element.prototype.disp=function(e){e?this.show():this.hide()},Element.prototype.is_shown=function(){return null==this.getAttribute("hidden")},Element.prototype.on=function(e,t){this.addEventListener(e,t)},Element.prototype.to_top=function(){this.scrollBy(0,-Number.MAX_SAFE_INTEGER)},Element.prototype.to_bottom=function(){this.scrollBy(0,Number.MAX_SAFE_INTEGER)};class ut{_____JS_LANG_____(){}static new_lock(){var e;return[new Promise(((t,n)=>{e=t})),e]}static eval_ctx(Jscode,Data){var Result=function(Jscode){return eval(Jscode)}.call(Data,Jscode);return Result}_____UTILS_____(){}static ls_empty(e){return null==localStorage[e]||0==localStorage[e].trim().length}static d$(e){return document.querySelector(e)}static d$$(e){return[...document.querySelectorAll(e)]}static e$(e,t){return e.querySelector(":scope "+t)}static e$$(e,t){return[...e.querySelectorAll(":scope "+t)]}static get_style(e,t){return e.currentStyle?e.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(e,null).getPropertyValue(t):null}static new_ele(e,t=null){var n=document.createElement(e);return null!=t&&(n.innerHTML=t),n}static escape_html(e){return null==e?null:e.replaceAll("<","&lt;").replaceAll(">","&gt;")}static escape_attr(e){return null==e?null:e.replaceAll("'","&apos;").replaceAll('"',"&quot;").replaceAll("\n"," ")}static tidy_up(e){return e.trim().replace(/[\s]{2,}/g," ")}static move(e,t,n){if(t!=n)return t>n?e.splice(n,0,e.splice(t,1)[0]):e.splice(n-1,0,e.splice(t,1)[0]),e}static find_ancestor_with_id(e,t){if(e.id==t)return e;for(;null!=e&&!e.id==t;)e=e.parentElement;return e}static find_ancestor_with_class(e,t){if(e.classList.contains(t))return e;for(;null!=e&&!e.classList.contains(t);)e=e.parentElement;return e}static url_params(e=null){null==e&&(e=location.search);var t=new URLSearchParams(e),n={};for(let e of[...t.keys()])n[e]=t.get(e);return n}static get_url_param(e){return thisclass.url_params()[e]}_____Clipboard_____(){}static copy_to_clipboard(e){navigator.clipboard.writeText(e)}_____Utils_Miscs_____(){}static email_is_valid(e){var t=new_ele("input");return t.attr("type","email"),t.value=e,t.checkValidity()}static get_page_topbottom(e,t){return null==e._Paging&&(e._Paging={}),null==e._Paging[t]&&(e._Paging[t]={}),{Pagetop:e._Paging[t].Pagetop,Pagebottom:e._Paging[t].Pagebottom}}static set_page_topbottom(e,t,n,r){null==e._Paging&&(e._Paging={}),null==e._Paging[t]&&(e._Paging[t]={}),e._Paging[t].Pagetop=n,e._Paging[t].Pagebottom=r}_____TEMPLATING_____(){}_____Legacy_____(){}static v_(e){return e}static if_(e){return e?"":"hidden"}static for_(e,t){var n="";for(let r of e)n+=thisclass.eval_ctx("`"+t+"`",r);return n}static for_key_(e,t){var n="";for(let r in e)n+=thisclass.eval_ctx("`"+t+"`",{Key:r,Val:e[r]});return n}static com_(e,t){return _cvm_cvm_js__WEBPACK_IMPORTED_MODULE_0__.Z.render_com(e,t,null,!1)}static call_(e,t){for(var n=e.target;null!=n;){if(null!=n.attr("screen-name")||null!=n.attr("com-name"))return null==n.Controller?void loge("No controller for",n):"function"!=typeof n.Controller[t]?void loge(`No such method '${t}', event:`,e):void n.Controller[t](e);n=n.parentElement}loge(`No such method '${t}', event:`,e)}_____New_____(){}static get_live_menu_item(e,t){if(t[0]=__h(t[0]),t[1]=null!=e[t[1]]?e[t[1]]:t[1],null!=t[2])for(let n=0;n<t[2].length;n++)t[2][n]=thisclass.get_live_menu_item(e,t[2][n]);return t}static get_live_menu(e,t){var n=obj(str(t));for(let t=0;t<n.length;t++)n[t]=thisclass.get_live_menu_item(e,n[t]);return n}static show_menu(e,t){e.preventDefault();for(var n=e.target;null!=n;){if(null!=n.attr("screen-name")||null!=n.attr("com-name"))return null==_cvm_cvm_js__WEBPACK_IMPORTED_MODULE_0__.Z.get_menu(t)?void loge(`No such menu '${t}', event:`,e):void(2==e.button?ui.show_menu(e,null,thisclass.get_live_menu(n.Controller,_cvm_cvm_js__WEBPACK_IMPORTED_MODULE_0__.Z.get_menu(t))):ui.show_menu(e,e.target,thisclass.get_live_menu(n.Controller,_cvm_cvm_js__WEBPACK_IMPORTED_MODULE_0__.Z.get_menu(t))));n=n.parentElement}loge(`No such menu '${t}', event:`,e)}static get_ui_event(){return window._Ui_Event}static parse_values(e,t,n="html"){var r;if(null!=(r=e.match(/({{[^{]+}})/g))&&r.length>0){r=[...new Set(r)];for(let a of r){let r=a.replace("{{","").replace("}}","").trim();if("this"==r)e=e.replaceAll(a,t);else{let i;if(0!=r.indexOf("js:")){let e=r.split(".");i=t;for(let t of e)i=i[t]}else{let e=r.replace("js:","");e=`var {${keys(t).join(",")}}=this;`+e;try{i=ut.eval_ctx(e,t)}catch(t){loge("ut.js/parse_values:",t),loge("Code:",e)}}null!=i?("boolean"==typeof i&&(i=new Boolean(i)),"number"==typeof i&&(i=new Number(i)),i=i.toString()):i="null",e="html"==n||"key"==n?e.replaceAll(a,esch(i)):e.replaceAll(a,esca(i))}}}if(null==(r=e.match(/(\[\[[0-9A-Za-z_\s.]+\]\])/g))||0==r.length)return e;r=[...new Set(r)];for(let t of r){let r=t.replace("[[","").replace("]]","").trim();e="html"==n||"key"==n?e.replaceAll(t,__h(r)):"attr"==n?e.replaceAll(t,__a(r)):e.replaceAll(t,__(r))}return e}static parse_values_in_attrs(e,t){const n=thisclass.parse_values;for(let r of e.attrs())e.attr(r,n(e.attr(r),t,"attr"))}static parse_attr(e,t,n){thisclass.escape_html;const r=thisclass.escape_attr,a=thisclass.parse_values;let i,l;if(i=t.indexOf("{{")>=0?a(t,n,"html"):t,l=e.attr(t),null==l||0==l.trim().length)return` ${i}`;if(0==l.trim().indexOf("screen:"))return` ${i}="cvm_.render_screen('${l.replace("screen:","").trim()}',{})"`;if(0==l.trim().indexOf("method:"))return` ${i}="window._Ui_Event=event; call(event,'${l.replace("method:","").trim()}')"`;if(0==l.trim().indexOf("menu:"))return` ${i}="window._Ui_Event=event; show_menu_(event,'${l.replace("menu:","").trim()}')"`;if(0==l.trim().indexOf("dialog:")){let e=l.replace("dialog:","").trim();if(-1==e.indexOf("/"))return` ${i}="window._Ui_Event=event; ui.dialog(__a('DIALOG'),'${e}',{},()=>{ ui.no_dlg_buttons(); })"`;{let t=e.split("/");return e=t[0],"ok"==t[1]?` ${i}="window._Ui_Event=event; ui.dialog(__a('DIALOG'),'${e}',{},()=>{})"`:(loge(`Invalid dialog option in: ${e}/${t[1]}`),` ${i}="window._Ui_Event=event; ui.dialog(__a('DIALOG'),'${e}',{},()=>{ ui.no_dlg_buttons(); })"`)}}return` ${i}="${r(a(l,n,"attr"))}"`}static parse_if(e,t){var n,r=Object.keys(t),a="const {";for(let e of r)a+=e+",";a+="} = this;\n",a+=e+";";try{n=thisclass.eval_ctx(a,t)}catch(e){loge("Error:",e),loge("Code:",a),n=!0}return 1==n?` if="${e}"`:` if="${e}" hidden`}static parse_for(e,t){var n=e.attr("for"),r=n.split(":"),a=r[0].trim();n=r.slice(1).join(":"),null!=e.attr("id")&&e.attr("id",e.attr("id")+rand_id()),null!=e.attr("name")&&e.attr("name",e.attr("name")+rand_id()),t._Ele=e;var i,l=Object.keys(t),s="const {";for(let e of l)s+=e+",";s+="} = this;\n",s+='var Html = "";\n',s+=`var i=0;\nfor (${n.trim()}) {\n   if (typeof ${a}=="boolean") ${a}=new Boolean(${a});\n   if (typeof ${a}=="number")  ${a}=new Number(${a});\n   if (typeof ${a}=="string")  ${a}=new String(${a});\n   ${a}._Con = _Con;\n   ${a}._index = i;\n   ${a}._Varname = "${a}";\n   ${a}._Pa = this;\n   Html += ut.parse_ele(_Ele,${a},1);\n   i++;}\nHtml;`;try{i=thisclass.eval_ctx(s,t)}catch(e){loge("Error:",e),loge("Code:",s),i="<div>"+e.toString()+"</div>"}return i}static parse_forkey(e,t){var n=e.attr("for-key"),r=n.split(":"),a=r[0].trim();n=r.slice(1).join(":");var i=a.split("/")[1];a=a.split("/")[0],null!=e.attr("id")&&e.attr("id",e.attr("id")+rand_id()),null!=e.attr("name")&&e.attr("name",e.attr("name")+rand_id()),t._Ele=e;var l,s=Object.keys(t),_="const {";for(let e of s)_+=e+",";_+="} = this;\n",_+='var Html = "";\n',_+=`for (${n.trim()}) {\n   Html += ut.parse_ele(_Ele,\n      {Key:${a}, Val:${i}[${a}]}\n   ,1);\n}\nHtml;`;try{l=thisclass.eval_ctx(_,t)}catch(e){loge("Error:",e),loge("Code:",_),l="<div>"+e.toString()+"</div>"}return l}static parse_com(e,t){var n,r,a=e.attr("com");if(-1==a.indexOf("/"))n=a,r=t;else{n=a.split("/")[0];let e=a.split("/")[1];if(e.indexOf("{")>=0)try{r=JSON.parse(e)}catch{loge(`Bad component JSON data (${n}):`,e),r={}}else null==t[e]?(loge(`Bad field key (${n}):`,e),r={}):r=t[e]}return _cvm_cvm_js__WEBPACK_IMPORTED_MODULE_0__.Z.render_com(n,r,null,!1)}static parse_ele(e,t,n){thisclass.escape_html,thisclass.escape_attr;const r=thisclass.parse_values;var a="";if(n>0){a+="<"+e.tagName;for(let n of e.attrs())a+="if"==n?thisclass.parse_if(e.attr("if"),t):thisclass.parse_attr(e,n,t);a+=">"}for(let i of e.childNodes)if(i.nodeType==Node.TEXT_NODE)a+=r(i.nodeValue,t,"html");else if(i.nodeType==Node.COMMENT_NODE)a+=`\x3c!--${i.nodeValue}--\x3e`;else{let e=i.attrs();e.indexOf("for")>=0?(thisclass.parse_values_in_attrs(i,t),a+=thisclass.parse_for(i,t)):e.indexOf("for-key")>=0?(thisclass.parse_values_in_attrs(i,t),a+=thisclass.parse_forkey(i,t)):e.indexOf("com")>=0?(thisclass.parse_values_in_attrs(i,t),a+=thisclass.parse_com(i,t)):a+=thisclass.parse_ele(i,t,n+1)}return n>0&&-1==["area","base","br","col","embed","hr","img","input","link","meta","source","track","wbr"].indexOf(e.tagName.toLowerCase())&&(a+="</"+e.tagName+">"),a}static parse_dom(e,t){var n=new_ele("div");return n.innerHTML=e,thisclass.parse_ele(n,t,0)}}function _____WINDOW_____(){}window.ut=ut,window.new_lock=ut.new_lock,window.eval_ctx=ut.eval_ctx,window.d$=ut.d$,window.d$$=ut.d$$,window.e$=ut.e$,window.e$$=ut.e$$,window.get_style=ut.get_style,window.new_ele=ut.new_ele,window.esch=ut.escape_html,window.esca=ut.escape_attr,window.log=console.log,window.logw=console.warn,window.loge=console.error,window.logl=()=>{console.log("-".repeat(40)+"\n")},window.rand_id=()=>Math.random().toString().replace(".",""),window.rand_id_long=()=>`${rand_id()}-${rand_id()}-${rand_id()}`,window.touch=(e,t,n=null)=>{null==e[t]&&(e[t]=n)},window.if_=ut.if_,window.for_=ut.for_,window.for_key_=ut.for_key_,window.com_=ut.com_,window.call_=ut.call_,window.call=ut.call_,window.show_menu_=ut.show_menu,window.str=JSON.stringify,window.obj=function(e){try{return JSON.parse(e)}catch{return null}},window.keys=Object.keys,window.props=function(e){return Object.getOwnPropertyNames(Object.getPrototypeOf(e))},window.methods=function(e){var t=[];for(let n of props(e))"constructor"!=n&&"function"==typeof e[n]&&t.push(n);return t},window.extend_to=function(e,t,n){var r=methods(t);Object.setPrototypeOf(t,n),t.super=n;for(let n of r)t[n]=e.prototype[n]};const thisclass=ut,__WEBPACK_DEFAULT_EXPORT__=thisclass}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={};(()=>{__webpack_require__.d(__webpack_exports__,{Z:()=>h});var e=__webpack_require__(941),t=__webpack_require__(583),n=__webpack_require__(822);const r={NO_SECTION:{en_int:"No Section"},CANT_DRAG_INSIDE:{en_int:"Can't drag inside"},IC_ADD_CHILD:{en_int:"➕Add Child"},IC_RENAME:{en_int:"📝Rename"},IC_DELETE:{en_int:"❌Delete"},CLICK_ICON_TO_TOGGLE_CHILDREN:{en_int:"Click icon to toggle children"},HELLO:{en_int:"Hello",it_ita:"Ciao",vi_vnm:"Chào"},PICK_COLOUR:{en_int:"Pick Colour",it_ita:"Scegli Colore",vi_vnm:"Chọn Mầu"},ENTER_TWICE_TO_GET_OUT_OF_DOT:{en_int:"Enter twice to get out of dot"},OKAY:{en_int:"Okay",it_ita:"Bene",vi_vnm:"Đồng ý"},CANCEL:{en_int:"Cancel",it_ita:"Annula",vi_vnm:"Hủy"},MESSAGE:{en_int:"Message",it_ita:"Messaggio",vi_vnm:"Thông báo"},INPUT:{en_int:"Input",it_ita:"Input",vi_vnm:"Nhập liệu"},DIALOG:{en_int:"Dialog",it_ita:"Dialogo",vi_vnm:"Hội thoại"},SELECT:{en_int:"Select",it_ita:"Scegli",vi_vnm:"Lựa chọn"},CONFIRMATION:{en_int:"Confirmation",it_ita:"Confirmazione",vi_vnm:"Khẳng định"},YES:{en_int:"Yes",it_ita:"Sì",vi_vnm:"Có"},NO:{en_int:"No",it_ita:"No",vi_vnm:"Không"}};class a{static Phrases=r;_____UTILS_____(){}static set_lang(e){localStorage.Lang=e}static cur_lang(e){var t=localStorage.Lang;return null!=t&&0!=t.trim().length||(t="en-int"),t}static const2phrase(e){var t=localStorage.Lang;return null!=t&&0!=t.trim().length||(t="en-int"),null==i.Phrases[e]||null==i.Phrases[e][t.replace("-","_")]?e:i.Phrases[e][t.replace("-","_")]}static const2phrase_html(e){return i.const2phrase(e).replaceAll("<","&lt;").replaceAll(">","&gt;")}static const2phrase_attr(e){return i.const2phrase(e).replaceAll("'","&apos;").replaceAll('"',"&quot;").replaceAll("\n"," ")}_____CORE_____(){}static set_phrases(e){i.Phrases={...i.Phrases,...e}}}window.lang=a,window.__=a.const2phrase,window.__h=a.const2phrase_html,window.__a=a.const2phrase_attr;const i=a,l=i;var s=__webpack_require__(733),_=__webpack_require__(742),o=__webpack_require__(21);window.one=0,window.one_u=1,window.arr=2,window.arr_u=3,window.RO="readonly",window.RW="readwrite",window.D_AZ="next",window.D_AZ_UNIQ="nextunique",window.D_ZA="prev",window.D_ZA_UNIQ="prevunique",window.STOP="stop",window.gte=function(e){return IDBKeyRange.lowerBound(e)},window.gt=function(e){return IDBKeyRange.lowerBound(e,!0)},window.lte=function(e){return IDBKeyRange.upperBound(e)},window.lt=function(e){return IDBKeyRange.upperBound(e,!0)},window.in_with_lr=function(e,t){return IDBKeyRange.bound(e,t)},window.in_without_lr=function(e,t){return IDBKeyRange.bound(e,t,!0,!0)},window.in_with_r=function(e,t){return IDBKeyRange.bound(e,t,!0,!1)},window.in_with_l=function(e,t){return IDBKeyRange.bound(e,t,!1,!0)},window.eq=function(e){return IDBKeyRange.only(e)},window.range2name=function(e){if(null!=e.lower)var t="x";else t="null";if(null!=e.upper)var n="x";else n="null";var r=`${t}/${e.lowerOpen}/${n}/${e.upperOpen}`;return"x/false/x/false"==r?e.lower==e.upper?"eq":"in_with_lr":"x/false/null/true"==r?"gte":"x/true/null/true"==r?"gt":"null/true/x/false"==r?"lte":"null/true/x/true"==r?"lt":"x/false/x/false"==r?"in_with_lr":"x/true/x/true"==r?"in_without_lr":"x/true/x/false"==r?"in_with_r":"x/false/x/true"==r?"in_with_l":void 0},window.itype2str=function(e){return e==one?"one":e==one_u?"one_u":e==arr?"arr":e==arr_u?"arr_u":void 0},window.s1=function(e){var t=e.objectStoreNames[0];return e.objectStore(t)};class c{static db_ready=!1;_____UTILS_____(){}static valid_indexes(e){if(!e instanceof Object)return!1;for(let t in e)if(e[t].length%2!=0)return!1;for(let t in e)for(let n in e[t])if("id"==n||n instanceof Array&&1==n.length&&"id"==n[0])return!1;for(let t in e)for(let n=0;n<e[t].length;n++){let r=e[t][n];if(n%2==0){if("string"!=typeof r&&!(r instanceof Array))return!1}else if("number"!=typeof r)return!1}return!0}static async get_cur_ver(e){const t=window.indexedDB.open(e);var[n,r]=new_lock();return t.onsuccess=e=>{let n=t.result;r(n.version),n.close()},await n}static async get_store_names(e){const t=window.indexedDB.open(e);var[n,r]=new_lock();return t.onsuccess=e=>{let n=t.result;r([...n.objectStoreNames]),n.close()},await n}static filter_for_new_names(e,t){var n=[];for(let r of t)-1==e.indexOf(r)&&n.push(r);return n}static field_to_idx_name(e){if("string"==typeof e)return e.toLowerCase().replaceAll(".","_").replace(/[^0-9A-Za-z_]/,"_");var t=JSON.stringify(e);return(t=t.replaceAll('","',"__")).replaceAll(".","_").replaceAll('"',"").replaceAll("[","").replaceAll("]","").replace(/[^0-9A-Za-z_]/,"_").toLowerCase()}static add_indexes_for_ops(e){for(let t in e){let n=e[t].length;if(0!=n)for(let r=0;r<n/2;r++){let n,a=e[t][2*r];n="string"==typeof a?["id",a]:["id"].concat(a),e[t].push(n),e[t].push(one_u)}}return e}static async get_index_names(e,t){var n=window.indexedDB.open(e),[r,a]=new_lock(),i={};return n.onsuccess=e=>{var n=e.target.result,r=[...n.objectStoreNames],l=[];if(0==r.length)return n.close(),void a(i);for(let e of t)r.indexOf(e)>=0&&l.push(e);var s=n.transaction(l,"readonly");for(let e of l){let t=[...s.objectStore(e).indexNames].sort();i[e]=t}n.close(),a(i)},await r}static has_new_indexes(e,t){var n=0;for(let r in e){let a,i=e[r].sort();a=null==t[r]?[]:t[r],a=a.filter((e=>"number"!=typeof e));for(let e=0;e<a.length;e++)a[e]=d.field_to_idx_name(a[e]);let l=a.sort();for(let e of l)-1==i.indexOf(e)&&(log(`idb.js: New index in store '${r}': ${e}`),n++)}return n>0}static async do_upgrade(e,t,n,r){var a=window.indexedDB.open(e,t+1),[i,l]=new_lock();a.onupgradeneeded=e=>{let t=e.target.result;for(let e of n)t.createObjectStore(e,{keyPath:"id",autoIncrement:!0});let a=e.target.transaction;for(let e in r){let t=a.objectStore(e),n=r[e].length;for(let a=0;a<n/2;a++){let n=r[e][2*a],i=r[e][2*a+1],l=i==arr||i==arr_u,s=i==one_u||i==arr_u;try{t.createIndex(d.field_to_idx_name(n),n,{unique:s,multiEntry:l})}catch(e){"ConstraintError"==e.name||loge("idb.js: Error:",n,"->",itype2str(i)+",",e)}}}t.close(),l()},await i}_____CORE_____(){}static async open(e,t){if(d.valid_indexes(t)){var n=await d.get_cur_ver(e),r=await d.get_store_names(e),a=d.filter_for_new_names(r,keys(t));if(log("idb.js: Current ver :",n),log("idb.js: Stores found:",r),log("idb.js: New stores  :",a),t=d.add_indexes_for_ops(t),keys(t).length>0)var i=await d.get_index_names(e,keys(t));else i={};(a.length>0||d.has_new_indexes(i,t))&&await d.do_upgrade(e,n,a,t),d.db_ready=!0}else loge("Error, bad indexes:",t)}static async reopen(e){if(!d.db_ready)return loge("idb.js: Error: Must call 'open' once (only once) before"),null;const t=window.indexedDB.open(e);var[n,r]=new_lock();return t.onsuccess=e=>{let n=t.result;r(n)},await n}_____CRUD_____(){}_____Crud_Utils_____(){}static index_name_exists(e,t){return"id"==t||[...e.indexNames].indexOf(t)>=0}static parse_cond(e){for(let t in e)e[t]instanceof IDBKeyRange||(e[t]=eq(e[t]));return e}static async set_by_id(e,t){var n=s1(e).put(t),[r,a]=new_lock();return n.onsuccess=e=>{a(t.id)},await r}static async get_by_id(e,t,n=null){var r=s1(e).get(eq(t)),[a,i]=new_lock();return r.onsuccess=e=>{null!=n&&n(e.target.result),i(e.target.result)},await a}static async del_by_id(e,t){var n=s1(e).delete(eq(t)),[r,a]=new_lock();return n.onsuccess=e=>{a(t)},await r}static async find(e,t,n=!0,r=!0){var a=s1(e);t=d.parse_cond(t);for(let e in t)if(!d.index_name_exists(a,e))return void loge(`idb.js: find: Error: Missing index ${e} in store ${a.name}, maybe the conditions to find are field names instead of index names?`);if(0==keys(t).length){var i=[];return await d.open_cursor(e,"id",gte(0),D_AZ,((e,t,r)=>{if(i.push(t),n)return STOP})),n?r?i[0]:i[0]?.id:r?i.sort(((e,t)=>e.id-t.id)):i.map((e=>e.id)).sort()}if(1==keys(t).length){i=[];var l=keys(t)[0],s=t[l];return await d.open_cursor(e,l,s,D_AZ,((e,t,r)=>{if(i.push(t),n)return STOP})),n?r?i[0]:i[0]?.id:r?i.sort(((e,t)=>e.id-t.id)):i.map((e=>e.id)).sort()}var _={},o=[],c=!1;for(let e in t)if("eq"==range2name(t[e])){o=[e].concat(keys(t).filter((t=>t!=e))),c=!0;break}if(!c){for(let n in t)_[n]=await d.count_range(e,n,t[n]);(o=keys(t)).sort(((e,t)=>_[e]-_[t]))}if(0==o[0])return n?null:[];var u=o[0],p=new Set([]);await d.open_cursor(e,u,t[u],D_AZ,((e,t,n)=>{p.add(t.id)}));var f=o.slice(1);if(f.indexOf("id")>=0){let e=range2name(t.id),n=t.id.lower,r=t.id.upper,a=n==r?n:null,i=[...p];"eq"==e?i=[a]:"gte"==e?i=i.filter((e=>e>=n)):"gt"==e?i=i.filter((e=>e>n)):"lte"==e?i=i.filter((e=>e<=r)):"lt"==e?i=i.filter((e=>e<r)):"in_with_lr"==e?i=i.filter((e=>e>=n&&e<=r)):"in_without_lr"==e?i=i.filter((e=>e>n&&e<r)):"in_with_r"==e?i=i.filter((e=>e>n&&e<=r)):"in_with_l"==e&&(i=i.filter((e=>e>=n&&e<r))),p=new Set(i),o=[o[0]].concat(f.filter((e=>"id"!=e)))}for(let n=1;n<o.length;n++){let r=o[n],a="id__"+r,i=new Set(p);for(let n of[...p]){let l={},s=t[r],_=range2name(s),o=s.lower,c=s.upper,u=o==c?o:null;"eq"==_?l[a]=eq([n,u]):"gte"==_?l[a]=gte([n,o]):"gt"==_?l[a]=gt([n,o]):"lte"==_?l[a]=lte([n,c]):"lt"==_?l[a]=lt([n,c]):"in_with_lr"==_?l[a]=in_with_lr([n,o],[n,c]):"in_without_lr"==_?l[a]=in_without_lr([n,o],[n,c]):"in_with_r"==_?l[a]=in_with_r([n,o],[n,c]):"in_with_l"==_&&(l[a]=in_with_l([n,o],[n,c])),null==await d.find(e,l,!0)&&i.delete(n)}p=i}if(0==(p=[...p].sort()).length)return n?null:[];if(n){let t=await d.get_by_id(e,p[0]);return r?t:t.id}if(r){let t=[],n=[];for(let r of p)t.push(d.get_by_id(e,r,(e=>{n.push(e)})));return await Promise.all(t),n.sort(((e,t)=>e.id-t.id)),n}return p}_____Single_Doc_____(){}static async insert_one(e,t,n=null){var r=s1(e).add(t),[a,i]=new_lock();return r.onsuccess=e=>{null!=n&&n(e.target.result),i(e.target.result)},await a}static async find_one(e,t){return await d.find(e,t,!0,!0)}static async update_one(e,t,n){var r=await d.find_one(e,t);if(null!=r){var a=r.id;return delete r.id,delete n.id,(r={...r,...n}).id=a,await d.set_by_id(e,r),a}}static async upsert_one(e,t,n){var r=await d.find_one(e,t);if(null==r)return delete n.id,await d.insert_one(e,n);var a={...r,...n};return delete a.id,await d.update_one(e,t,a)}static async remove_one(e,t){var n=await d.find(e,t,!0,!1);if(null!=n)return await d.del_by_id(e,n),n}_____Multidocs_____(){}static async insert_many(e,t){var n=[],r=[];for(let a of t)r.push(d.insert_one(e,a,(e=>{n.push(e)})));return await Promise.all(r),n.sort()}static async find_many(e,t){return await d.find(e,t,!1,!0)}static async update_many(e,t,n){var r=await d.find(e,t,!1,!0),a=[];delete n.id;for(let t of r)t={...t,...n},a.push(d.set_by_id(e,t));return await Promise.all(a),r.map((e=>e.id)).sort()}static async upsert_many(e,t,n){}static async remove_many(e,t){var n=await d.find(e,t,!1,!1),r=[];for(let t of n)r.push(d.del_by_id(e,t));return await Promise.all(r),n}static async count_all(e,t=null){var n=s1(e);if(null==t)var r=n.count();else r=n.index(t).count();var[a,i]=new_lock();return r.onsuccess=e=>{i(e.target.result)},await a}static async count_range(e,t,n){var r=s1(e);if("id"==t)var a=r.count(n);else a=r.index(t).count(n);var[i,l]=new_lock();return a.onsuccess=e=>{l(e.target.result)},await i}static async count_with_conds(e,t){return(await d.find(e,t,!1,!1)).length}static async filter(e,t){t=d.parse_cond(t);var n=[],r=keys(t).length;return await d.open_cursor(e,"id",gte(0),D_AZ,((e,a)=>{let i=[];for(let e in t){let n=t[e],r=range2name(n),l=n.lower,s=n.upper,_=l==s?l:null;"eq"==r?a[e]==_?i.push(1):i.push(0):"gte"==r?a[e]>=l?i.push(1):i.push(0):"gt"==r?a[e]>l?i.push(1):i.push(0):"lte"==r?a[e]<=s?i.push(1):i.push(0):"lt"==r?a[e]<s?i.push(1):i.push(0):"in_with_lr"==r?a[e]>=l&&a[e]<=s?i.push(1):i.push(0):"in_without_lr"==r?a[e]>l&&a[e]<s?i.push(1):i.push(0):"in_with_r"==r?a[e]>l&&a[e]<=s?i.push(1):i.push(0):"in_with_l"==r&&(a[e]>=l&&a[e]<s?i.push(1):i.push(0))}i.reduce(((e,t)=>e+t),0)==r&&n.push(a)})),n}_____MISCS_____(){}static async open_id_cursor(e,t,n,r){var a=s1(e).openCursor(t,n),[i,l]=new_lock();a.onsuccess=async e=>{let t=e.target.result;t?"stop"==await r(t.key,t.value,{update:t.update,remove:t.delete})?l():t.continue():l()},await i}static async open_id_keycursor(e,t,n,r){var a=s1(e).openKeyCursor(t,n),[i,l]=new_lock();a.onsuccess=async e=>{let t=e.target.result;t?"stop"==await r(t.key,{update:t.update,remove:t.delete})?l():t.continue():l()},await i}static async open_cursor(e,t,n,r,a){if("id"==t)return await d.open_id_cursor(e,n,r,a);var i=s1(e).index(t).openCursor(n,r),[l,s]=new_lock();i.onsuccess=async e=>{let t=e.target.result;t?"stop"==await a(t.key,t.value,{update:t.update,remove:t.delete})?s():t.continue():s()},await l}static async open_keycursor(e,t,n,r,a){if("id"==t)return await d.open_id_keycursor(e,n,r,a);var i=s1(e).index(t).openKeyCursor(n,r),[l,s]=new_lock();i.onsuccess=async e=>{let t=e.target.result;t?"stop"==await a(t.key,{update:t.update,remove:t.delete})?s():t.continue():s()},await l}_____TESTS_____(){}static async insert(e,t,n){var r=(await d.reopen(e)).transaction(t,RW);return await d.insert_one(r,n)}static async test(){}}window.idb=c;const d=c,u=d;var p=__webpack_require__(417),f=__webpack_require__(720);const h={base_controller:e.Z,cvm:t.Z,files:n.Z,lang:l,net:s.Z,ui:_.Z,ut:o.Z,idb:u,enc:p.Z,gfs:f.Z}})();var __webpack_exports__default=__webpack_exports__.Z;export{__webpack_exports__default as default};